# PropVerified v0 Scope

## Overview
v0 is an **alpha version for internal testing only**. The goal is to validate the core value proposition: verifying real prop firm payouts using blockchain transaction data.

## Key Principles
- **No authentication** - Internal testing only
- **Single test user** - Hardcoded wallet address
- **No backend server** - All logic in Next.js API routes
- **Real blockchain data** - Fetch from Arbitrum via Arbiscan API

---

## Technical Stack

### Blockchain
- **Network:** Arbitrum (Layer 2)
- **Explorer:** Arbiscan (https://arbiscan.io/)
- **API:** Arbiscan API (https://api.arbiscan.io/)
- **Test Wallet:** `0x1C969652D758f8Fc23C443758f8911086F676216`

### APIs & Services
- **Arbiscan API** - Transaction data
- **CoinGecko API** - Historical USD price conversion
- No database required (stateless API calls)

### Frontend
- Next.js 15 (existing repo)
- Existing UI components from [trader/[handle]/page.js](../app/trader/[handle]/page.js)
- Recharts for visualization (already installed)

---

## Core Features (v0)

### 1. Transaction History API
**Endpoint:** `GET /api/transactions?address={address}`

**Functionality:**
- Fetch all incoming transactions to the wallet address
- Support both native ETH and ERC-20 tokens (USDC, USDT)
- Convert amounts to USD using historical prices
- Filter out transactions < $10 (spam/dust)
- Return last 100 transactions or 6 months of data (whichever is smaller)
- Basic caching (5 minutes) to avoid rate limits

**Response Structure:**
```json
{
  "address": "0x1C969652D758f8Fc23C443758f8911086F676216",
  "totalTransactions": 47,
  "totalPayoutUSD": 215000,
  "last30DaysPayoutUSD": 22000,
  "last30DaysCount": 3,
  "transactions": [
    {
      "txHash": "0xabc123...",
      "timestamp": 1717574400,
      "date": "2024-06-15T10:00:00Z",
      "from": "0x742d35Cc6634C0532925a3b844Bc9e7595f0bEb",
      "fromShort": "0x742d...0bEb",
      "to": "0x1C969652D758f8Fc23C443758f8911086F676216",
      "amount": "0.5",
      "amountUSD": 1250.00,
      "token": "ETH",
      "tokenAddress": null,
      "blockNumber": 123456789,
      "status": "success",
      "arbiscanUrl": "https://arbiscan.io/tx/0xabc123..."
    }
  ]
}
```

### 2. Trader Profile Page
**Route:** `/trader/thefundedlady` (reuse existing route)

**Updates:**
- Replace mock data with real API call to `/api/transactions`
- Hardcode test wallet address: `0x1C969652D758f8Fc23C443758f8911086F676216`
- Display real transaction history in the table
- Update stats cards with real data (total verified, last 30 days, avg payout)
- Update monthly chart with real transaction data
- Keep verification badge and UI as-is

**Data Displayed:**
- Total verified payouts (lifetime USD)
- Last 30 days payout (USD)
- Payout count
- Average payout
- Monthly payout chart (last 6 months)
- Transaction log table with:
  - Date
  - From address (shortened)
  - Transaction hash (link to Arbiscan)
  - Amount (USD)

### 3. Leaderboard Page
**Route:** `/leaderboard`

**Status:** Keep as-is with mock data (no changes for v0)

---

## Technical Implementation Details

### API Route Structure
```
app/api/transactions/route.js
```

**Key Functions:**
1. `fetchNativeTransactions(address)` - Get ETH transfers from Arbiscan
2. `fetchTokenTransactions(address)` - Get ERC-20 transfers (USDC, USDT)
3. `convertToUSD(amount, token, timestamp)` - Historical price lookup via CoinGecko
4. `filterAndSort(transactions)` - Remove dust, sort by date
5. `calculateStats(transactions)` - Compute totals and 30-day metrics

**Caching Strategy:**
- Simple in-memory cache with 5-minute TTL
- No external cache (Redis, etc.) needed for v0
- Cache key: `transactions:${address}`

### Error Handling
- Graceful fallback if Arbiscan API fails
- Return cached data if available
- Clear error messages for debugging
- Log errors to console (no external logging service)

### Environment Variables
```env
ARBISCAN_API_KEY=your_arbiscan_api_key_here
NEXT_PUBLIC_TEST_WALLET_ADDRESS=0x1C969652D758f8Fc23C443758f8911086F676216
```

---

## Out of Scope (v0)

### Not Included:
- L User authentication/login
- L Multiple user profiles
- L Wallet connection (MetaMask, WalletConnect)
- L Database storage
- L Admin dashboard
- L Verification submission flow
- L Paid verification
- L Prop firm identification (just show addresses)
- L Multi-chain support (only Arbitrum)
- L Real-time updates (manual refresh)
- L Social sharing features
- L SEO optimization

### Future Phases:
These features will be addressed in Phase 1 (MVP) and beyond:
- Multiple user profiles with authentication
- Wallet connection for self-service verification
- Database for storing verified users
- Admin approval workflow
- Prop firm wallet address mapping
- Multi-chain support (Ethereum, Polygon, BSC)
- Leaderboard with real data

---

## Success Criteria (v0)

### Technical Validation:
1.  API successfully fetches real transaction data from Arbiscan
2.  USD conversion is accurate (within 5% margin)
3.  Trader profile page displays real data without errors
4.  Page load time < 3 seconds
5.  No console errors or warnings

### Product Validation:
1.  Transaction history is readable and makes sense
2.  Stats (total, 30-day, avg) are calculated correctly
3.  UI clearly shows this is blockchain-verified data
4.  Team can manually verify a few transactions on Arbiscan

### Next Steps Decision:
After v0 testing, we decide:
- **GO:** Real data looks good ’ proceed to Phase 1 (MVP) with multi-user support
- **PIVOT:** Data is too noisy/complex ’ refine filtering logic before scaling
- **STOP:** Technical blockers or insufficient data ’ reassess approach

---

## Timeline Estimate
- **API Development:** 2-3 days
- **UI Integration:** 1-2 days
- **Testing & Refinement:** 1 day
- **Total:** ~1 week for v0

---

## Notes & Assumptions
- Rise payouts are primarily on **Arbitrum** (confirmed)
- Test wallet has sufficient transaction history for validation
- Arbiscan API free tier is sufficient (no rate limit issues expected)
- CoinGecko API free tier is sufficient for historical prices
- Team has access to Arbiscan API key
- No legal/compliance review needed for internal testing

---

## Risk Mitigation
- **Risk:** Arbiscan API rate limits ’ **Mitigation:** Implement caching + fallback to cached data
- **Risk:** Inaccurate USD prices ’ **Mitigation:** Use CoinGecko historical prices + manual spot checks
- **Risk:** Too many small transactions (spam) ’ **Mitigation:** Filter out < $10 transactions
- **Risk:** API changes breaking integration ’ **Mitigation:** Error handling + version pinning
